

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>pisces.util &#8212; Pisces v0.4.2 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'apidocs/pisces.util';</script>
    <link rel="icon" href="../_static/LANL Logo Ultramarine globe.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="pisces.request" href="pisces.request.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/LANL Logo Ultramarine.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/LANL Logo White.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    Pisces
                </a>
            </li>
        </ul>
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../tutorial/tables.html">The Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/queries.html">Using the Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/waveforms.html">Working with Waveforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/flatfiles.html">Import/Export Flat Files</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../about/license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/changelog.html">Changelog</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="modules.html">API Documentation</a><input checked class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 current active has-children"><a class="reference internal" href="pisces.html">pisces</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l3 has-children"><a class="reference internal" href="pisces.commands.html">pisces.commands</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="pisces.commands.create.html">pisces.commands.create</a></li>
<li class="toctree-l4"><a class="reference internal" href="pisces.commands.db2db.html">pisces.commands.db2db</a></li>
<li class="toctree-l4"><a class="reference internal" href="pisces.commands.drop.html">pisces.commands.drop</a></li>
<li class="toctree-l4"><a class="reference internal" href="pisces.commands.main.html">pisces.commands.main</a></li>
<li class="toctree-l4"><a class="reference internal" href="pisces.commands.mseed2db.html">pisces.commands.mseed2db</a></li>
<li class="toctree-l4"><a class="reference internal" href="pisces.commands.sac2db.html">pisces.commands.sac2db</a></li>
<li class="toctree-l4"><a class="reference internal" href="pisces.commands.util.html">pisces.commands.util</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="pisces.io.html">pisces.io</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="pisces.io.mseed.html">pisces.io.mseed</a></li>
<li class="toctree-l4"><a class="reference internal" href="pisces.io.readwaveform.html">pisces.io.readwaveform</a></li>
<li class="toctree-l4"><a class="reference internal" href="pisces.io.sac.html">pisces.io.sac</a></li>
<li class="toctree-l4"><a class="reference internal" href="pisces.io.trace.html">pisces.io.trace</a></li>
<li class="toctree-l4"><a class="reference internal" href="pisces.io.util.html">pisces.io.util</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="pisces.schema.html">pisces.schema</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="pisces.schema.antelope.html">pisces.schema.antelope</a></li>
<li class="toctree-l4"><a class="reference internal" href="pisces.schema.css3.html">pisces.schema.css3</a></li>
<li class="toctree-l4"><a class="reference internal" href="pisces.schema.kbcore.html">pisces.schema.kbcore</a></li>
<li class="toctree-l4"><a class="reference internal" href="pisces.schema.util.html">pisces.schema.util</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="pisces.tables.html">pisces.tables</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="pisces.tables.antelope.html">pisces.tables.antelope</a></li>
<li class="toctree-l4"><a class="reference internal" href="pisces.tables.css3.html">pisces.tables.css3</a></li>
<li class="toctree-l4"><a class="reference internal" href="pisces.tables.kbcore.html">pisces.tables.kbcore</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="pisces.client.html">pisces.client</a></li>
<li class="toctree-l3"><a class="reference internal" href="pisces.crud.html">pisces.crud</a></li>
<li class="toctree-l3"><a class="reference internal" href="pisces.request.html">pisces.request</a></li>
<li class="toctree-l3 current active"><a class="current reference internal" href="#">pisces.util</a></li>
</ul>
</li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/LANL-seismoacoustics/pisces" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/apidocs/pisces.util.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>pisces.util</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pisces.util.add_rows"><code class="docutils literal notranslate"><span class="pre">add_rows()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pisces.util.db_connect"><code class="docutils literal notranslate"><span class="pre">db_connect()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pisces.util.deprecated"><code class="docutils literal notranslate"><span class="pre">deprecated()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pisces.util.gen_id"><code class="docutils literal notranslate"><span class="pre">gen_id()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pisces.util.get_lastids"><code class="docutils literal notranslate"><span class="pre">get_lastids()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pisces.util.get_options"><code class="docutils literal notranslate"><span class="pre">get_options()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pisces.util.get_or_create_tables"><code class="docutils literal notranslate"><span class="pre">get_or_create_tables()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pisces.util.get_tables"><code class="docutils literal notranslate"><span class="pre">get_tables()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pisces.util.load_config"><code class="docutils literal notranslate"><span class="pre">load_config()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pisces.util.make_same_size"><code class="docutils literal notranslate"><span class="pre">make_same_size()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pisces.util.make_table"><code class="docutils literal notranslate"><span class="pre">make_table()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pisces.util.make_wildcard_list"><code class="docutils literal notranslate"><span class="pre">make_wildcard_list()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pisces.util.travel_times"><code class="docutils literal notranslate"><span class="pre">travel_times()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pisces.util.url_connect"><code class="docutils literal notranslate"><span class="pre">url_connect()</span></code></a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="module-pisces.util">
<span id="pisces-util"></span><h1>pisces.util<a class="headerlink" href="#module-pisces.util" title="Permalink to this heading">#</a></h1>
<p>Common Pisces utility functions.</p>
<dl class="py function">
<dt class="sig sig-object py" id="pisces.util.add_rows">
<span class="sig-prename descclassname"><span class="pre">pisces.util.</span></span><span class="sig-name descname"><span class="pre">add_rows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rows</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recurse</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pisces/util.html#add_rows"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisces.util.add_rows" title="Permalink to this definition">#</a></dt>
<dd><p>Handle common errors with logging in SQLAlchemy add_all.</p>
<p>Tries to add in bulk.  Failing that, it will rollback and optionally try
to add one at a time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>session</strong><span class="classifier">sqlalchemy.orm.Session</span></dt><dd></dd>
<dt><strong>rows</strong><span class="classifier">list</span></dt><dd><p>Mapped table instances.</p>
</dd>
<dt><strong>recurse</strong><span class="classifier">bool, optional</span></dt><dd><p>After failure, try to add records individually.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>num</strong><span class="classifier">int</span></dt><dd><p>Number of objects added.  0 if none.</p>
</dd>
<dt><strong>e</strong><span class="classifier">exception or None</span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisces.util.db_connect">
<span class="sig-prename descclassname"><span class="pre">pisces.util.</span></span><span class="sig-name descname"><span class="pre">db_connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pisces/util.html#db_connect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisces.util.db_connect" title="Permalink to this definition">#</a></dt>
<dd><p>Connect to your database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>backend</strong><span class="classifier">string</span></dt><dd><p>One of the SQLAlchemy connection strings from
<a class="reference external" href="http://docs.sqlalchemy.org/en/rel_0_7/core/engines.html#database-urls">http://docs.sqlalchemy.org/en/rel_0_7/core/engines.html#database-urls</a></p>
</dd>
<dt><strong>user</strong><span class="classifier">string, optional</span></dt><dd><p>Not required for sqlite.</p>
</dd>
<dt><strong>passwd</strong><span class="classifier">string, optional</span></dt><dd><p>Not needed for sqlite. Prompted if needed and not provided.</p>
</dd>
<dt><strong>server</strong><span class="classifier">string, optional</span></dt><dd><p>Database host server.</p>
</dd>
<dt><strong>port</strong><span class="classifier">string or integer, optional</span></dt><dd><p>Port on remote server.</p>
</dd>
<dt><strong>instance</strong><span class="classifier">string, optional</span></dt><dd><p>The database instance.  For sqlite, this is the file name.</p>
</dd>
<dt><strong>conn</strong><span class="classifier">string, optional</span></dt><dd><p>A fully-formed SQLAlchemy style connection string.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>session</strong><span class="classifier">bound SQLAlchemy Session instance</span></dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>For connection string format, see:
<a class="reference external" href="http://docs.sqlalchemy.org/en/rel_0_8/core/engines.html">http://docs.sqlalchemy.org/en/rel_0_8/core/engines.html</a></p>
<p class="rubric">Examples</p>
<ol class="arabic simple">
<li><p>Connect to a local sqlite database file:</p></li>
</ol>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">meta</span><span class="p">,</span> <span class="n">session</span> <span class="o">=</span> <span class="n">db_connect</span><span class="p">(</span><span class="n">conn</span><span class="o">=</span><span class="s1">&#39;sqlite:///mydb.sqlite&#39;</span><span class="p">)</span>
<span class="go">#or</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meta</span><span class="p">,</span> <span class="n">session</span> <span class="o">=</span> <span class="n">db_connect</span><span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="s1">&#39;sqlite&#39;</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="s1">&#39;mydb.sqlite&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisces.util.deprecated">
<span class="sig-prename descclassname"><span class="pre">pisces.util.</span></span><span class="sig-name descname"><span class="pre">deprecated</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instructions</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pisces/util.html#deprecated"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisces.util.deprecated" title="Permalink to this definition">#</a></dt>
<dd><p>Flags a method as deprecated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>instructions</strong><span class="classifier">str</span></dt><dd><p>A human-friendly string of instructions, such as:
‘Please migrate to add_proxy() ASAP.’</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">References</p>
<p><a class="reference external" href="https://gist.github.com/kgriffs/8202106">https://gist.github.com/kgriffs/8202106</a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisces.util.gen_id">
<span class="sig-prename descclassname"><span class="pre">pisces.util.</span></span><span class="sig-name descname"><span class="pre">gen_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pisces/util.html#gen_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisces.util.gen_id" title="Permalink to this definition">#</a></dt>
<dd><p>Produce a generator for sequential integer id values.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">lastorid</span> <span class="o">=</span> <span class="mi">7</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">orid</span> <span class="o">=</span> <span class="n">gen_id</span><span class="p">(</span><span class="n">lastorid</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">orid</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">8</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">orid</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">9</span>
</pre></div>
</div>
<p>Generate more than one at a time:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">orid</span><span class="p">,</span> <span class="n">arid</span><span class="p">,</span> <span class="n">wfid</span> <span class="o">=</span> <span class="p">(</span><span class="n">gen_id</span><span class="p">()</span> <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;orid&#39;</span><span class="p">,</span> <span class="s1">&#39;arid&#39;</span><span class="p">,</span> <span class="s1">&#39;wfid&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">orid</span><span class="o">.</span><span class="n">next</span><span class="p">(),</span> <span class="n">arid</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">(1, 1)</span>
</pre></div>
</div>
<p>Dictionary of id generators for desired ids, starting where they left off.
ids not in Lastid will be missing</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ids</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">Lastid</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">Lastid</span><span class="o">.</span><span class="n">keyname</span><span class="o">.</span><span class="n">in_</span><span class="p">([</span><span class="s1">&#39;orid&#39;</span><span class="p">,</span><span class="s1">&#39;arid&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">last</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">([(</span><span class="nb">id</span><span class="o">.</span><span class="n">keyname</span><span class="p">,</span> <span class="n">gen_id</span><span class="p">(</span><span class="nb">id</span><span class="o">.</span><span class="n">keyvalue</span><span class="p">))</span> <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">last</span><span class="p">[</span><span class="s1">&#39;orid&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">8820005</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisces.util.get_lastids">
<span class="sig-prename descclassname"><span class="pre">pisces.util.</span></span><span class="sig-name descname"><span class="pre">get_lastids</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lastid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keynames</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expunge</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pisces/util.html#get_lastids"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisces.util.get_lastids" title="Permalink to this definition">#</a></dt>
<dd><p>Load or create Lastid instances into a convenient and readable
attribute-based dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>session</strong><span class="classifier">sqlalchemy.orm.Session instance</span></dt><dd></dd>
<dt><strong>Lastid</strong><span class="classifier">Lastid table class</span></dt><dd></dd>
<dt><strong>ids</strong><span class="classifier">list or tuple of strings</span></dt><dd><p>Lastid.keyname values to load.</p>
</dd>
<dt><strong>expunge</strong><span class="classifier">bool</span></dt><dd><p>If True, expunge loaded ids from the session.  This frees you
to modify them without affecting the database from which they
were loaded.  In this case, you’ll have to add them back into a
session and commit them for their changes to be reflected on the
database.</p>
</dd>
<dt><strong>create</strong><span class="classifier">bool</span></dt><dd><p>If True, create ids that don’t already exist.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>last</strong><span class="classifier">obspy.core.AttribDict</span></dt><dd><p>Attribute-based dictionary of all lastids.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Get and set lastid values directly by name or by attribute.
&gt;&gt;&gt; last = get_lastids(session, Lastid, [‘orid’, ‘arid’])
&gt;&gt;&gt; last.orid, last[‘orid’]
Lastid(keyname=’orid’), Lastid(keyname=’orid’)</p>
<p>Test for their existence by name.
&gt;&gt;&gt; ‘orid’ in last
True</p>
<p>Use the Lastid’s ‘next’ generator behavior for readable code
&gt;&gt;&gt; next(last.orid)
18
&gt;&gt;&gt; last.orid.keyvalue
18</p>
<p>Update your database when you’re done.
&gt;&gt;&gt; session.add_all(ids.values())
&gt;&gt;&gt; session.commit()</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisces.util.get_options">
<span class="sig-prename descclassname"><span class="pre">pisces.util.</span></span><span class="sig-name descname"><span class="pre">get_options</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pisces/util.html#get_options"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisces.util.get_options" title="Permalink to this definition">#</a></dt>
<dd><dl class="simple">
<dt>for coretable in CORETABLES:</dt><dd><dl class="simple">
<dt>table_group.add_argument(’–’ + coretable.name,</dt><dd><dl class="simple">
<dt>default=None,</dt><dd><p>metavar=’owner.tablename’,
dest=coretable.name)</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisces.util.get_or_create_tables">
<span class="sig-prename descclassname"><span class="pre">pisces.util.</span></span><span class="sig-name descname"><span class="pre">get_or_create_tables</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">tables</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pisces/util.html#get_or_create_tables"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisces.util.get_or_create_tables" title="Permalink to this definition">#</a></dt>
<dd><p>Load or create canonical ORM KB Core table classes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>session</strong><span class="classifier">sqlalchemy.orm.Session</span></dt><dd></dd>
<dt><strong>create</strong><span class="classifier">bool</span></dt><dd><p>If True, create a table object that isn’t found.</p>
</dd>
<dt><strong>tables</strong></dt><dd><p>Canonical table name / formatted table name keyword pairs.</p>
</dd>
<dt><strong>Also accepted are canonical table name keywords with ‘[owner.]tablename’</strong></dt><dd></dd>
<dt><strong>arguments, which will replace any prefix-based core table names.</strong></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>tables</strong><span class="classifier">dict</span></dt><dd><p>Mapping between canonical table names and SQLA ORM classes.
e.g. {‘origin’: MyOrigin, …}</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisces.util.get_tables">
<span class="sig-prename descclassname"><span class="pre">pisces.util.</span></span><span class="sig-name descname"><span class="pre">get_tables</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bind</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fulltablenames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">primary_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pisces/util.html#get_tables"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisces.util.get_tables" title="Permalink to this definition">#</a></dt>
<dd><p>Reflect/load an arbitrary database table as a mapped class.</p>
<p>This is a shortcut for SQLAlchemy’s declarative mapping using __table__.
See <a class="reference external" href="http://docs.sqlalchemy.org/en/rel_0_9/orm/extensions/declarative.html#using-a-hybrid-approach-with-table">http://docs.sqlalchemy.org/en/rel_0_9/orm/extensions/declarative.html#using-a-hybrid-approach-with-table</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>bind</strong><span class="classifier">sqlalchemy.engine.base.Engine instance</span></dt><dd><p>Engine pointing to the target database.</p>
</dd>
<dt><strong>fulltables</strong><span class="classifier">list of strings</span></dt><dd><p>Of the form [‘owner1.tablename1’, ‘owner2.tablename2’, …]
Leave out ‘owner.’ if database doesn’t use owners (sqlite, etc…)</p>
</dd>
<dt><strong>metadata</strong><span class="classifier">sqlalchemy.MetaData, optional</span></dt><dd><p>MetaData into which reflected Tables go. If not supplied, a new one
is created, accessible from MyTable.metadata on one of the loaded
tables.</p>
</dd>
<dt><strong>primary_keys</strong><span class="classifier">dict, optional</span></dt><dd><p>Tablename, primary key list pairs of the form,
{‘owner1.tablename1’: [‘primary_key1’, ‘primary_key2’]}
These are required if the table is a view or has no primary key.</p>
</dd>
<dt><strong>base</strong><span class="classifier">sqlalchemy.ext.declarative.api.DeclarativeMeta, optional</span></dt><dd><p>The declarative base the from which loaded table classes will inherit.
The info dictionary of loaded Columns will be updated from those in
the base.  These are used to generate default values and string
representations.  Import from pisces.schema.css3, or extensions thereof.
Default, sqlalchemy.ext.declarative.api.DeclarativeMeta.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>list</dt><dd><p>Corresponding list of ORM table classes mapped to reflected tables,
Can be used for querying or making row instances.</p>
</dd>
</dl>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>sqlalchemy.exc.NoSuchTableError</strong><span class="classifier">Table doesn’t exist.</span></dt><dd></dd>
<dt><strong>sqlalchemy.exc.InvalidRequestError</strong><span class="classifier">Table already loaded in metadata.</span></dt><dd></dd>
<dt><strong>sqlalchemy.exc.ArgumentError</strong><span class="classifier">Table has no primary key(s).</span></dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>In SQLAlchemy, a database account/owner is generally used with the “schema”
keyword argument.</p>
<p>For core tables in a Pisces schema, this function isn’t recommended.
Instead, subclass from the known abstract table.</p>
<p class="rubric">Examples</p>
<p># for unknown table
&gt;&gt;&gt; import pisces.schema.css3 as css
&gt;&gt;&gt; RandomTable = get_tables(engine, [‘randomtable’])</p>
<p># for a known/prototype table
&gt;&gt;&gt; class Site(css.Site):</p>
<blockquote>
<div><p>__tablename__ = ‘myaccount.my_site_tablename’</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisces.util.load_config">
<span class="sig-prename descclassname"><span class="pre">pisces.util.</span></span><span class="sig-name descname"><span class="pre">load_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pisces/util.html#load_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisces.util.load_config" title="Permalink to this definition">#</a></dt>
<dd><p>Take dictionary-like object (actual dictionary or ConfigParser section)
to produce a SQLAlchemy database session and dictionary of database table
classes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>config</strong><span class="classifier">dict-like</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>session</strong><span class="classifier">SQLAlchemy database session instance</span></dt><dd></dd>
<dt><strong>tables</strong><span class="classifier">dict</span></dt><dd><p>Keys are canonical table names, values are SQLAlchemy table classes.</p>
</dd>
<dt>The config input is a dict-like object of table name keys and class paths.</dt><dd></dd>
<dt>This can be a configparser object or a nested dict. The “database” section and “url” key</dt><dd></dd>
<dt>are required.  Any additional parameters in the section must be importable</dt><dd></dd>
<dt>module names, with optional SQLAlchemy table class names separated by a colon “:”.</dt><dd></dd>
<dt>If no class name is provided, a class with the capitalized key name is imported.</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>The following inputs should be equivalent.</p>
<p># pisces.cfg
[database] # required
url = oracle://myuser:mypass&#64;dbserver.someplace.gom:1521/dbname # required
site = mytablemodule:SiteClassName
wfdisc = mytablemodule:WfdiscClassName
mytable = custom_tables:MyCustomTableClass
arrival = othermodule</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;oracle://myuser:mypass@dbserver.someplace.gom:1521/dbname&#39;</span><span class="p">,</span>
<span class="go">              &#39;site&#39;: &#39;modulename:SiteClassName&#39;,</span>
<span class="go">              &#39;wfdisc&#39;: &#39;modulename:Wfdisc_raw&#39;,</span>
<span class="go">              &#39;mytable&#39;: &#39;custom_tables:MyCustomTableClass&#39;,</span>
<span class="go">              &#39;arrival&#39;: &#39;othermodule&#39;,</span>
<span class="go">              }</span>
<span class="go"># or</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">configparser</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="n">configparser</span><span class="o">.</span><span class="n">ConfigParser</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;pisces.cfg&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">session</span><span class="p">,</span> <span class="n">tables</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;database&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tables</span>
<span class="gp">... </span><span class="p">{</span><span class="s1">&#39;arrival&#39;</span><span class="p">:</span> <span class="n">othermodule</span><span class="o">.</span><span class="n">Arrival</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;mytable&#39;</span><span class="p">:</span> <span class="n">custom_tables</span><span class="o">.</span><span class="n">MyCustomTableClass</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;site&#39;</span><span class="p">:</span> <span class="n">modulename</span><span class="o">.</span><span class="n">SiteClassName</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;wfdisc&#39;</span><span class="p">:</span> <span class="n">modulename</span><span class="o">.</span><span class="n">Wfdisc_raw</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisces.util.make_same_size">
<span class="sig-prename descclassname"><span class="pre">pisces.util.</span></span><span class="sig-name descname"><span class="pre">make_same_size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lat1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lon1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lat2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lon2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pisces/util.html#make_same_size"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisces.util.make_same_size" title="Permalink to this definition">#</a></dt>
<dd><p>Returns numpy arrays the same size as longest inputs.
assume: lat1/lon1 are same size and lat2/lon2 are same size
assume: the smaller of the sizes is a scalar</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisces.util.make_table">
<span class="sig-prename descclassname"><span class="pre">pisces.util.</span></span><span class="sig-name descname"><span class="pre">make_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fulltablename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prototype</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pisces/util.html#make_table"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisces.util.make_table" title="Permalink to this definition">#</a></dt>
<dd><p>Create a new ORM class/model on-the-fly from a prototype.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>fulltablename</strong><span class="classifier">str</span></dt><dd><p>Schema-qualified name of the database table, like ‘owner.tablename’
or just ‘tablename’.  The resulting classname will be the capitalized
tablename, like ‘Tablename’.</p>
</dd>
<dt><strong>prototype</strong><span class="classifier">sqlalchemy abstract ORM class</span></dt><dd><p>The prototype table class. pisces.schema.css.Site, for example.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>It’s better to declare classes in an external module, and import them.
SQLAlchemy doesn’t let you use the same table names twice, so on-the-fly
class creation and naming is risky:</p>
<ol class="arabic simple">
<li><p>You can’t use make_tables again if you accidentally overwrite the
variable you used to hold the class you created.</p></li>
<li><p>You can’t use make_tables again if you import something from a
script/module where make_tables was used with the same table name.</p></li>
</ol>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisces.util.make_wildcard_list">
<span class="sig-prename descclassname"><span class="pre">pisces.util.</span></span><span class="sig-name descname"><span class="pre">make_wildcard_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">toList</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pisces/util.html#make_wildcard_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisces.util.make_wildcard_list" title="Permalink to this definition">#</a></dt>
<dd><p>Take a list, tuple, or comma separated string of variables and output a list 
with sql wildcards ‘%’ and ‘_’</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>toList</strong><span class="classifier">list, tuple, or comma separated string or variables</span></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>nowList: list of variables contained in the toList variable</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisces.util.travel_times">
<span class="sig-prename descclassname"><span class="pre">pisces.util.</span></span><span class="sig-name descname"><span class="pre">travel_times</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ref</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">km</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pisces/util.html#travel_times"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisces.util.travel_times" title="Permalink to this definition">#</a></dt>
<dd><p>Get <em>approximate</em> relative travel time(s).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>ref</strong><span class="classifier">list or tuple of strings and/or floats</span></dt><dd><p>Reference phase names or horizontal velocities [km/sec].</p>
</dd>
<dt><strong>deg</strong><span class="classifier">float, optional</span></dt><dd><p>Degrees of arc between two points of interest (spherical earth).</p>
</dd>
<dt><strong>km</strong><span class="classifier">float, optional</span></dt><dd><p>Horizontal kilometers between two points of interest (spherical earth).</p>
</dd>
<dt><strong>depth</strong><span class="classifier">float, optional. default, 0.</span></dt><dd><p>Depth (positive down) of event, in kilometers.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>numpy.ndarray</dt><dd><p>Relative times, in seconds, same length as “ref”. NaN if requested time
is undefined.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Either deg or km must be indicated.
The user is responsible for adding/subtracting time (such as origin
time, pre-window noise time, etc.) from those predicted in order to define
a window.
Phase travel times use ak135.</p>
<p class="rubric">Examples</p>
<p>Get relative P arrival and 2.7 km/sec surface wave arrival at 35 degrees
distance.
&gt;&gt;&gt; times = travel_times([‘P’, 2.7], deg=35.0)
To get absolute window, add the origin time like:
&gt;&gt;&gt; w1, w2 = times + epoch_origin_time</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pisces.util.url_connect">
<span class="sig-prename descclassname"><span class="pre">pisces.util.</span></span><span class="sig-name descname"><span class="pre">url_connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pisces/util.html#url_connect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pisces.util.url_connect" title="Permalink to this definition">#</a></dt>
<dd><p>Connect to a database using an RFC-1738 compliant URL, like sqlalchemy’s
create_engine, prompting for a password if a username is supplied.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>url</strong><span class="classifier">string</span></dt><dd><p>A fully-formed SQLAlchemy style connection string.
See <a class="reference external" href="http://docs.sqlalchemy.org/en/latest/core/engines.html#database-urls">http://docs.sqlalchemy.org/en/latest/core/engines.html#database-urls</a></p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>session</strong><span class="classifier">bound SQLAlchemy Session instance</span></dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>SQLite database file, local:
&gt;&gt;&gt; url_connect(‘sqlite:///local/path/to/mydb.sqlite’)</p>
<p>SQLite database file, full path:
&gt;&gt;&gt; url_connect(‘sqlite:////full/path/to/mydb.sqlite’)</p>
<p>Remote Oracle, OS-authenticated (no user or password needs to be specified)
&gt;&gt;&gt; url_connect(‘oracle://dbserver.lanl.gov:8080/mydb’)</p>
<p>Remote Oracle, password-authenticated (specify user, prompted for password)
&gt;&gt;&gt; url_connect(‘oracle://scott&#64;dbserver.lanl.gov:8080/mydb’)
Enter password for scott:</p>
<p>Remote Oracle, password-authenticated (password specified)
&gt;&gt;&gt; url_connect(‘oracle://scott:tiger&#64;dbserver.lanl.gov:8080/mydb’)</p>
</dd></dl>

</section>


                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="pisces.request.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">pisces.request</p>
      </div>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pisces.util.add_rows"><code class="docutils literal notranslate"><span class="pre">add_rows()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pisces.util.db_connect"><code class="docutils literal notranslate"><span class="pre">db_connect()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pisces.util.deprecated"><code class="docutils literal notranslate"><span class="pre">deprecated()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pisces.util.gen_id"><code class="docutils literal notranslate"><span class="pre">gen_id()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pisces.util.get_lastids"><code class="docutils literal notranslate"><span class="pre">get_lastids()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pisces.util.get_options"><code class="docutils literal notranslate"><span class="pre">get_options()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pisces.util.get_or_create_tables"><code class="docutils literal notranslate"><span class="pre">get_or_create_tables()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pisces.util.get_tables"><code class="docutils literal notranslate"><span class="pre">get_tables()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pisces.util.load_config"><code class="docutils literal notranslate"><span class="pre">load_config()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pisces.util.make_same_size"><code class="docutils literal notranslate"><span class="pre">make_same_size()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pisces.util.make_table"><code class="docutils literal notranslate"><span class="pre">make_table()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pisces.util.make_wildcard_list"><code class="docutils literal notranslate"><span class="pre">make_wildcard_list()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pisces.util.travel_times"><code class="docutils literal notranslate"><span class="pre">travel_times()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pisces.util.url_connect"><code class="docutils literal notranslate"><span class="pre">url_connect()</span></code></a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Jonathan MacCarthy
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023, Jonathan MacCarthy.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>